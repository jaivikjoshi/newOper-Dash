(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{5531:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n=t(2265);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(...e)=>e.filter((e,r,t)=>!!e&&t.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:l,...d},u)=>(0,n.createElement)("svg",{ref:u,...o,width:r,height:r,stroke:e,strokeWidth:s?24*Number(t)/Number(r):t,className:i("lucide",a),...d},[...l.map(([e,r])=>(0,n.createElement)(e,r)),...Array.isArray(c)?c:[c]])),c=(e,r)=>{let t=(0,n.forwardRef)(({className:t,...o},c)=>(0,n.createElement)(a,{ref:c,iconNode:r,className:i(`lucide-${s(e)}`,t),...o}));return t.displayName=`${e}`,t}},9036:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},711:function(e,r,t){Promise.resolve().then(t.bind(t,4955))},4955:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var n=t(7437);t(2265);var s=t(6110),i=t(3023),o=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,o.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var c=t(9036),l=t(1396),d=t.n(l),u=t(7587),m=t(6903);function f(e){let{requiredPermission:r,children:t,fallbackTitle:s="Access Restricted",fallbackMessage:i="You do not have permission to access this page.",fallbackType:o="permission",redirectTo:a="/dashboard",buttonText:c="Go Back to Dashboard"}=e,l=(0,u.Tg)(r);return l?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,n.jsx)("div",{className:"max-w-md w-full",children:(0,n.jsx)(m.Z,{title:s,message:i,type:o,redirectTo:a,buttonText:c})})})}var h=t(7260);function g(){let{userProfile:e}=(0,h.useUser)();return(0,n.jsx)(f,{requiredPermission:"settings:edit",fallbackTitle:"Admin Area Restricted",fallbackMessage:"You need administrator privileges to access this page. Your current role (".concat((null==e?void 0:e.role)||"guest",") doesn't have sufficient permissions."),fallbackType:"error",buttonText:"Go Back to RBAC Demo",redirectTo:"/dashboard/rbac-demo",children:(0,n.jsx)("div",{className:"p-8",children:(0,n.jsxs)("div",{className:"mb-8 max-w-4xl",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,n.jsx)(d(),{href:"/dashboard/rbac-demo",children:(0,n.jsxs)(i.z,{variant:"ghost",size:"sm",children:[(0,n.jsx)(a,{className:"mr-2 h-4 w-4"}),"Back to RBAC Demo"]})}),(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Protected Admin Page"})]}),(0,n.jsxs)(s.Zb,{className:"mb-8",children:[(0,n.jsxs)(s.Ol,{className:"bg-green-50",children:[(0,n.jsxs)(s.ll,{className:"flex items-center text-green-800",children:[(0,n.jsx)(c.Z,{className:"mr-2 h-5 w-5"}),"Success! You Have Access"]}),(0,n.jsx)(s.SZ,{className:"text-green-600",children:"This page is only visible to users with the 'settings:edit' permission, which is available to Owner and Admin roles."})]}),(0,n.jsx)(s.aY,{className:"pt-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("p",{children:["You're seeing this page because your role (",null==e?void 0:e.role,") has the ",(0,n.jsx)("strong",{children:"settings:edit"})," permission."]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("code",{children:"ProtectedPage"})," component is a higher-order component that wraps your entire page and checks if the user has the required permission before rendering the page content."]}),(0,n.jsx)("p",{children:"If the user doesn't have the required permission, they'll see an access denied message with a button to redirect them to another page."}),(0,n.jsxs)("div",{className:"p-4 bg-blue-50 rounded border border-blue-200 mt-4",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Implementation Example:"}),(0,n.jsx)("pre",{className:"text-sm bg-white p-4 rounded overflow-x-auto",children:'<ProtectedPage\n  requiredPermission="settings:edit"\n  fallbackTitle="Admin Area Restricted"\n  fallbackMessage="You need administrator privileges."\n  fallbackType="error"\n  buttonText="Go Back"\n  redirectTo="/dashboard"\n>\n  {/* Your protected page content here */}\n</ProtectedPage>'})]})]})})]})]})})})}},6903:function(e,r,t){"use strict";t.d(r,{Z:function(){return d}});var n=t(7437);t(2265);var s=t(9036),i=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,i.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var a=t(3023),c=t(1396),l=t.n(c);function d(e){let{title:r="Access Restricted",message:t="You do not have permission to access this page or feature.",redirectTo:i="/dashboard",buttonText:c="Go Back to Dashboard",type:d="permission"}=e,u="permission"===d?s.Z:o,m="permission"===d?"text-blue-800":"warning"===d?"text-amber-800":"text-red-800";return(0,n.jsxs)("div",{className:"p-6 md:p-10 rounded-lg border ".concat("permission"===d?"bg-blue-50 border-blue-100":"warning"===d?"bg-amber-50 border-amber-100":"bg-red-50 border-red-100"," flex flex-col items-center justify-center text-center"),children:[(0,n.jsx)(u,{className:"h-16 w-16 ".concat("permission"===d?"text-blue-200":"warning"===d?"text-amber-200":"text-red-200"," mb-4")}),(0,n.jsx)("h2",{className:"text-xl font-bold ".concat(m," mb-2"),children:r}),(0,n.jsx)("p",{className:"".concat("permission"===d?"text-blue-600":"warning"===d?"text-amber-600":"text-red-600"," mb-6 max-w-md"),children:t}),(0,n.jsx)(l(),{href:i,children:(0,n.jsx)(a.z,{variant:"outline",className:"border-2 ".concat(m),children:c})})]})}},7587:function(e,r,t){"use strict";t.d(r,{C9:function(){return o},Tg:function(){return i},UB:function(){return a}});var n=t(7260),s=t(1341);function i(e){let{userProfile:r}=(0,n.useUser)();if(!r||!r.role)return!1;try{let t=(0,s.fi)(r.role);return Array.isArray(t)&&t.includes(e)}catch(e){return console.error("Error checking permission:",e),!1}}function o(e){let{userProfile:r}=(0,n.useUser)();if(!r||!r.role||!Array.isArray(e)||0===e.length)return!1;try{let t=(0,s.fi)(r.role);return Array.isArray(t)&&e.some(e=>t.includes(e))}catch(e){return console.error("Error checking permissions:",e),!1}}function a(e){let{userProfile:r}=(0,n.useUser)();if(!r||!r.role||!Array.isArray(e)||0===e.length)return!1;try{let t=(0,s.fi)(r.role);return Array.isArray(t)&&e.every(e=>t.includes(e))}catch(e){return console.error("Error checking permissions:",e),!1}}},1341:function(e,r,t){"use strict";t.d(r,{Tg:function(){return o},fi:function(){return i}});var n=t(7260);let s={owner:["org:create","org:view","org:edit","org:delete","member:create","member:view","member:edit","member:delete","announcement:create","announcement:view","announcement:edit","announcement:delete","settings:view","settings:edit","settings:billing"],admin:["org:view","org:edit","member:create","member:view","member:edit","member:delete","announcement:create","announcement:view","announcement:edit","announcement:delete","settings:view","settings:edit"],manager:["org:view","member:create","member:view","member:edit","announcement:create","announcement:view","announcement:edit","settings:view"],staff:["org:view","member:view","announcement:view","settings:view"],guest:["org:view","announcement:view"]};function i(e){if(!e||"string"!=typeof e||!Object.keys(s).includes(e))return console.warn("Invalid role provided: ".concat(e)),[];try{return[...s[e]]}catch(r){return console.error("Error getting permissions for role ".concat(e,":"),r),[]}}function o(e){let{userProfile:r}=(0,n.useUser)();return function(e,r){if(!e||!r)return!1;try{var t;return(null===(t=s[e])||void 0===t?void 0:t.includes(r))||!1}catch(t){return console.error("Error checking permission ".concat(r," for role ").concat(e,":"),t),!1}}(null==r?void 0:r.role,e)}},3023:function(e,r,t){"use strict";t.d(r,{z:function(){return l}});var n=t(7437),s=t(2265),i=t(3474),o=t(9213),a=t(9311);let c=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,r)=>{let{className:t,variant:s,size:o,asChild:l=!1,...d}=e,u=l?i.g7:"button";return(0,n.jsx)(u,{className:(0,a.cn)(c({variant:s,size:o,className:t})),ref:r,...d})});l.displayName="Button"},6110:function(e,r,t){"use strict";t.d(r,{Ol:function(){return a},SZ:function(){return l},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var n=t(7437),s=t(2265),i=t(9311);let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});o.displayName="Card";let a=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...s})});a.displayName="CardHeader";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},9311:function(e,r,t){"use strict";t.d(r,{cn:function(){return i}});var n=t(7042),s=t(4769);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}}},function(e){e.O(0,[555,396,260,971,864,744],function(){return e(e.s=711)}),_N_E=e.O()}]);