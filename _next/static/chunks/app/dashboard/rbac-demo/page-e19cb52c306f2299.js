(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{3589:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});var r=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},5367:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});var r=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9325:function(e,s,n){Promise.resolve().then(n.bind(n,8160))},8160:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return O}});var r=n(7437),t=n(2265),i=n(6110),a=n(3023),l=n(7260),d=n(3666),o=n(1598),c=n(1341);function m(e){let{permission:s,fallback:n=null,tooltip:t,variant:i="default",buttonType:l,children:d,...o}=e,m=(0,c.Tg)(s);return m?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)(a.z,{variant:i,type:l,...o,children:d}),t&&(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:t})]}):(0,r.jsx)(r.Fragment,{children:n})}function h(e){let{entityType:s,children:n,...t}=e;return(0,r.jsx)(m,{permission:"".concat(s,":create"),...t,children:n})}function x(e){let{entityType:s,children:n,...t}=e;return(0,r.jsx)(m,{permission:"".concat(s,":edit"),...t,children:n})}function u(e){let{entityType:s,children:n,...t}=e;return(0,r.jsx)(m,{permission:"".concat(s,":delete"),variant:"destructive",...t,children:n})}var p=n(6903),g=n(7972),b=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,b.Z)("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);var y=n(9036);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,b.Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var v=n(3589),N=n(5367),w=n(2812),k=n(5750);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,b.Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);var Z=n(1396),M=n.n(Z),T=n(7587);function A(e){let s=(0,T.Tg)(e);return{canRender:s,render:e=>s?e:null,renderIf:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s?e:n}}}function O(){let{userProfile:e,updateUserProfile:s}=(0,l.useUser)(),[n,c]=(0,t.useState)((null==e?void 0:e.role)||"owner"),{renderIf:m}=A("settings:edit"),{renderIf:b}=A("member:edit"),{renderIf:Z}=function(e){let s=(0,T.C9)(e);return{canRender:s,render:e=>s?e:null,renderIf:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s?e:n}}}(["announcement:create","announcement:edit"]),O=n=>{e&&s({role:n})};return(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"mb-8 max-w-4xl",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Role-Based Access Control Demo"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"This page demonstrates the RBAC system. You can change your role to see how different permissions affect what you can see and do."}),(0,r.jsxs)(i.Zb,{className:"mb-8",children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"mr-2 h-5 w-5"}),"Your Current Role"]}),(0,r.jsx)(i.SZ,{children:"Change your role to see how your permissions change"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["owner","admin","manager","staff","guest"].map(s=>(0,r.jsx)(a.z,{variant:(null==e?void 0:e.role)===s?"default":"outline",onClick:()=>O(s),className:"capitalize",children:s},s))})}),(0,r.jsxs)(i.eW,{className:"text-sm text-gray-500",children:["You are currently logged in as: ",(0,r.jsx)("strong",{children:null==e?void 0:e.name})," with role: ",(0,r.jsx)("strong",{className:"capitalize",children:null==e?void 0:e.role})]})]}),(0,r.jsxs)(i.Zb,{className:"mb-8",children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center",children:[(0,r.jsx)(j,{className:"mr-2 h-5 w-5"}),"Protected Page Demo"]}),(0,r.jsx)(i.SZ,{children:"Try visiting the protected admin page with different roles"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{children:["This demo includes a protected page that can only be accessed by users with the ",(0,r.jsx)("strong",{children:"settings:edit"})," permission. Currently, only ",(0,r.jsx)("strong",{children:"Owner"})," and ",(0,r.jsx)("strong",{children:"Admin"})," roles have this permission."]}),(0,r.jsx)("p",{children:"Try accessing the page with different roles to see how the access control works. If you don't have the required permission, you'll see an access denied message."}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(M(),{href:"/dashboard/rbac-demo/protected-page-demo",children:(0,r.jsxs)(a.z,{children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Visit Protected Admin Page"]})})})]})})]}),(0,r.jsxs)(i.Zb,{className:"mb-8",children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-5 w-5"}),"Permission-Based UI Components"]}),(0,r.jsx)(i.SZ,{children:"These UI components will only appear if your role has the right permissions"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Organization Buttons"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(h,{entityType:"org",onClick:()=>alert("Create Organization"),className:"w-full",children:[(0,r.jsx)(f,{className:"mr-2 h-4 w-4"}),"Create Organization"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(x,{entityType:"org",onClick:()=>alert("Edit Organization"),className:"w-full",children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Edit Organization"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(u,{entityType:"org",onClick:()=>alert("Delete Organization"),className:"w-full",children:[(0,r.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Delete Organization"]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Member Buttons"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(h,{entityType:"member",onClick:()=>alert("Create Member"),className:"w-full",children:[(0,r.jsx)(f,{className:"mr-2 h-4 w-4"}),"Create Member"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(x,{entityType:"member",onClick:()=>alert("Edit Member"),className:"w-full",children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Edit Member"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(u,{entityType:"member",onClick:()=>alert("Delete Member"),className:"w-full",children:[(0,r.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Delete Member"]})})]})]})]})})]}),(0,r.jsxs)(i.Zb,{className:"mb-8",children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center",children:[(0,r.jsx)(w.Z,{className:"mr-2 h-5 w-5"}),"Permission-Protected Sections"]}),(0,r.jsx)(i.SZ,{children:"These sections will only appear if your role has the right permissions"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(o.ZP,{permission:"org:edit",fallback:(0,r.jsx)(p.Z,{title:"Cannot Edit Organizations",message:"Your current role does not have permission to edit organizations.",buttonText:"Learn More About Permissions",redirectTo:"#"}),children:(0,r.jsxs)("div",{className:"p-4 border rounded bg-blue-50",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Organization Editor"}),(0,r.jsx)("p",{className:"text-blue-600 mb-4",children:"This section is only visible to users with the 'org:edit' permission. Currently visible to: Owner, Admin"}),(0,r.jsx)("div",{className:"bg-white p-4 rounded border border-blue-200",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Organization Editor Form Would Go Here"})})]})}),(0,r.jsx)(o.ZP,{permission:"settings:edit",fallback:(0,r.jsx)(p.Z,{title:"Cannot Edit Settings",message:"Your current role does not have permission to edit system settings.",buttonText:"Learn More About Permissions",redirectTo:"#",type:"warning"}),children:(0,r.jsxs)("div",{className:"p-4 border rounded bg-purple-50",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-purple-800 mb-2",children:"Settings Manager"}),(0,r.jsx)("p",{className:"text-purple-600 mb-4",children:"This section is only visible to users with the 'settings:edit' permission. Currently visible to: Owner, Admin"}),(0,r.jsx)("div",{className:"bg-white p-4 rounded border border-purple-200",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Settings Manager Form Would Go Here"})})]})}),(0,r.jsx)(o.ZP,{permission:"member:edit",fallback:(0,r.jsx)(p.Z,{title:"Cannot Manage Members",message:"Your current role does not have permission to manage team members.",buttonText:"Learn More About Permissions",redirectTo:"#",type:"error"}),children:(0,r.jsxs)("div",{className:"p-4 border rounded bg-green-50",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-green-800 mb-2",children:"Member Manager"}),(0,r.jsx)("p",{className:"text-green-600 mb-4",children:"This section is only visible to users with the 'member:edit' permission. Currently visible to: Owner, Admin, Manager"}),(0,r.jsx)("div",{className:"bg-white p-4 rounded border border-green-200",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Member Management Form Would Go Here"})})]})})]})})]})]}),(0,r.jsxs)(i.Zb,{className:"mb-8 max-w-4xl",children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center",children:[(0,r.jsx)(k.Z,{className:"mr-2 h-5 w-5"}),"Permissions by Role"]}),(0,r.jsx)(i.SZ,{children:"Overview of what each role can do in the system"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)(d.Z,{selectedRole:n,onRoleSelect:c})})]}),(0,r.jsxs)(i.Zb,{className:"mb-8 max-w-4xl",children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center",children:[(0,r.jsx)(C,{className:"mr-2 h-5 w-5"}),"Conditional Rendering Hooks"]}),(0,r.jsx)(i.SZ,{children:"These hooks provide a cleaner way to conditionally render UI elements based on permissions"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Example Usage"}),(0,r.jsx)("p",{className:"mb-4",children:"The following components are conditionally rendered based on your current role:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m((0,r.jsxs)("div",{className:"p-4 bg-purple-50 rounded border border-purple-200",children:[(0,r.jsx)("h4",{className:"font-medium text-purple-800",children:"Admin Feature"}),(0,r.jsx)("p",{className:"text-sm text-purple-600",children:"This is only visible to users with the 'settings:edit' permission."})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded border border-gray-200",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800",children:"Admin Feature (Hidden)"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"You don't have 'settings:edit' permission."})]})),b((0,r.jsxs)("div",{className:"p-4 bg-blue-50 rounded border border-blue-200",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-800",children:"Team Management"}),(0,r.jsx)("p",{className:"text-sm text-blue-600",children:"This is only visible to users with the 'member:edit' permission."})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded border border-gray-200",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800",children:"Team Management (Hidden)"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"You don't have 'member:edit' permission."})]})),Z((0,r.jsxs)("div",{className:"p-4 bg-green-50 rounded border border-green-200",children:[(0,r.jsx)("h4",{className:"font-medium text-green-800",children:"Announcement Controls"}),(0,r.jsx)("p",{className:"text-sm text-green-600",children:"This is visible to users with either 'announcement:create' OR 'announcement:edit' permissions."})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded border border-gray-200",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800",children:"Announcement Controls (Hidden)"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"You don't have announcement management permissions."})]}))]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Implementation"}),(0,r.jsx)("div",{className:"bg-white p-4 rounded border overflow-x-auto",children:(0,r.jsx)("pre",{className:"text-sm",children:"// Import the hooks\nimport { useConditionalRender, useConditionalRenderAny } from '@/app/utils/auth/useConditionalRender';\n\n// In your component\nconst { renderIf: renderIfAdmin } = useConditionalRender('settings:edit');\nconst { renderIf: renderIfCanManageMembers } = useConditionalRender('member:edit');\nconst { renderIf: renderIfCanManageAnnouncements } = \n  useConditionalRenderAny(['announcement:create', 'announcement:edit']);\n\n// Then in your JSX\n{renderIfAdmin(\n  <div>Admin content</div>,\n  <div>Fallback content</div>\n)}\n\n// Or just to conditionally show/hide without fallback\n{renderIfAdmin(<div>Admin content</div>)}\n\n// Check if the user can render before executing complex logic\nconst { canRender } = useConditionalRender('settings:edit');\nif (canRender) {\n  // Do something that requires the permission\n}"})})]})]})})]})]})}},6903:function(e,s,n){"use strict";n.d(s,{Z:function(){return c}});var r=n(7437);n(2265);var t=n(9036),i=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,i.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var l=n(3023),d=n(1396),o=n.n(d);function c(e){let{title:s="Access Restricted",message:n="You do not have permission to access this page or feature.",redirectTo:i="/dashboard",buttonText:d="Go Back to Dashboard",type:c="permission"}=e,m="permission"===c?t.Z:a,h="permission"===c?"text-blue-800":"warning"===c?"text-amber-800":"text-red-800";return(0,r.jsxs)("div",{className:"p-6 md:p-10 rounded-lg border ".concat("permission"===c?"bg-blue-50 border-blue-100":"warning"===c?"bg-amber-50 border-amber-100":"bg-red-50 border-red-100"," flex flex-col items-center justify-center text-center"),children:[(0,r.jsx)(m,{className:"h-16 w-16 ".concat("permission"===c?"text-blue-200":"warning"===c?"text-amber-200":"text-red-200"," mb-4")}),(0,r.jsx)("h2",{className:"text-xl font-bold ".concat(h," mb-2"),children:s}),(0,r.jsx)("p",{className:"".concat("permission"===c?"text-blue-600":"warning"===c?"text-amber-600":"text-red-600"," mb-6 max-w-md"),children:n}),(0,r.jsx)(o(),{href:i,children:(0,r.jsx)(l.z,{variant:"outline",className:"border-2 ".concat(h),children:d})})]})}}},function(e){e.O(0,[555,396,260,183,971,864,744],function(){return e(e.s=9325)}),_N_E=e.O()}]);